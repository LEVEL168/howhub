<header>
    <%= render "partial/login-nav" %>
</header>

<% flash.each do |message_type, message| %>
    <div class="alert">
      <%= message %>
    </div>
<% end %>

<main class="craft-main">
    <h2><%= @craft.title %></h2>
    
    <% if @craft.image? %>
        <%= link_to image_url(@craft.image), "data-lightbox": image_url(@craft.image) do %>
          <%= image_tag image_url(@craft.image), class:"craft-img", style: "width:65%" %>
        <% end %>
    <% else %>
        <image src="/assets/text-only.jpg" alt="テキストのみの投稿">
    <% end %>
    
    <div class="c-user">
        <% if @craft.user_id === current_user.id %>
            <%= link_to profile_path(@user) do %>
                <%= image_tag @user.avatar.url, alt: "user-icon", class: "c-user-icon", size: "40x40" %>
                <span class="c-user-name"><%= @user.name %></span>
            <% end %>
        <% else %>
            <%= link_to controller: 'users', action: 'profile', id: @user do %>
                <%= image_tag @user.avatar.url, alt: "user-icon", class: "c-user-icon", size: "40x40" %>
                <span class="c-user-name"><%= @user.name %></span>
            <% end %>
        <% end %>
    </div>
    <p class="craft-time"><%= l @craft.created_at %></p>
    <p class="c-caption"><%= @craft.caption %></p>
    
    <div id="thank_btn_<%= @craft.id %>">
        <%= render "thanks/btn", craft: @craft %>
    </div>
    
    <% if @craft.user_id === current_user.id %>
        <div class="edit-link">
            <span><%= link_to "投稿を編集", edit_user_craft_path(current_user, @craft.id), class: "edit-btn" %></span>
            <span><%= link_to "投稿を削除", user_craft_path(current_user, @craft.id), method: :delete, data: { confirm: '本当に削除しますか？' }, class: "delete-btn" %></span>
        </div>
    <% end %>
    
    <div class="c-space"></div>
    
</main>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js" type="text/javascript"></script>
