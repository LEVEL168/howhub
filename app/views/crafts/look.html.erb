<header>
    <%= render "partial/login-nav" %>
</header>

<% flash.each do |message_type, message| %>
    <div class="alert">
      <%= message %>
    </div>
<% end %>

<main>
    <h3 class="border-h3">投稿一覧</h3>
    
    <%= form_with url: search_path, method: :get, local: true do |f| %>
        <%= f.text_field :keyword, placeholder: "キーワード検索",class: "search_form", style: "width:80%" %>
        <%= f.submit "検索", class: "search_submit" %>
    <% end %>
    
    <div class="card-list">
        <ul class="card"> 
            <% @crafts.each do |craft| %>
                <div class="one-card">
                    <% if current_user %>
                        <li class="card-img"><%= link_to (image_tag "#{craft.image}"), user_craft_path(current_user, craft.id) %></li>
                        <li class="card-title"><%= link_to craft.title.truncate(10), user_craft_path(current_user, craft.id) %></li>
                        <li class="card-name"><%= link_to craft.user.name.truncate(10), user_craft_path(current_user, craft.id) %></li>
                    <% end %>
                </div>
            <% end %>
        </ul>
        <%= paginate @crafts %>
    </div>
</main>